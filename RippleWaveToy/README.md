# Hamon

Author: YUK_KND

Nothing PhoneのGlyph Matrix用の波紋トイアプリです。中心から同心円の波紋が外へ広がる物理シミュレーションを25×25のLEDマトリックス上で表現します。

## 特徴

- **物理的な波紋シミュレーション**: 中心から同心円の波紋が外へ伝播
- **長押し機能**: 新しい水滴を落とす + 3種類のプロファイル切替
- **AOD対応**: 省電力モードで毎分ゆっくり波が進む
- **複数波源**: 最大3つの水滴を同時に表示可能
- **円形マスク**: 25×25の正方ではなく、実表示の円に合わせた表示

## プロファイル

1. **柔らかめ**: 波長4.0px、速度0.22px/frame、減衰0.06
2. **くっきり・速い**: 波長3.0px、速度0.35px/frame、減衰0.05
3. **ゆったり・減衰強**: 波長5.5px、速度0.16px/frame、減衰0.08

## 使い方

1. アプリをインストール
2. Glyph Toys設定から「Hamon」を選択
3. 背面のGlyph Buttonでトイを切り替え
4. 長押しで新しい水滴追加 + プロファイル切替
5. AOD設定で省電力モード

## 技術仕様

- **物理計算**: 位相 = 2π × ((r - v×t) / λ)
- **減衰**: 距離に対してexp(-α×r)、時間に対してenvelope(age)
- **合成**: 複数の水滴を加算合成
- **円マスク**: 実表示の円に合わせて縁をソフトに

## 開発環境

- Android Studio
- Nothing Phone (Phone 3)
- Glyph Matrix SDK 1.0

## ビルド方法

### エミュレーター用（推奨）
1. プロジェクトをAndroid Studioで開く
2. エミュレーターを起動
3. ビルドして実行
4. シミュレーターで波紋の動作を確認

### 実機用
1. プロジェクトをAndroid Studioで開く
2. Glyph Matrix SDKのAARファイルが`app/libs/`に配置されていることを確認
3. ビルドしてAPKを生成
4. Nothing Phoneにインストール

## エミュレーターでの動作

エミュレーターでは以下の機能が利用可能です：

- **25×25グリッド表示**: 波紋を500×500ピクセルの画面に拡大表示
- **プロファイル切替**: 3つの波紋プロファイルを切り替え
- **水滴追加**: 長押しボタンで新しい水滴を追加
- **AODシミュレーション**: AODボタンで1ステップずつ波を進める

実機のGlyph Matrixと同じ物理計算を使用しているため、動作確認に最適です。

## カスタマイズ

`RippleWaveToyService.java`（Hamon Toy）内の以下のパラメータを調整可能：

- `profiles[]`: 波長、速度、減衰の設定
- `envelope()`: 時間経過による立ち上がり・減衰カーブ
- `base/scale`: ベース輝度とコントラスト
- `RADIUS`: 描画円の大きさ

## ライセンス

このプロジェクトはGlyph Matrix Developer Kitを使用して作成されています。
